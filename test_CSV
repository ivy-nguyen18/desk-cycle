import serial
import string
import csv
from datetime import datetime, timezone
ser = serial.Serial('/dev/ttyACM0',9600)

#what should be sent to ser = velocity and the "steps" from the optical encoder (delimited by a / )
while True:
    serialData=ser.readline().decode('utf-8').split('/')

    # get time
    utc_dt = datetime.now(timezone.utc) #UTC time with milliseconds included
    timeMS = utc_dt.astimezone().strftime('%H:%M:%S.%f')[:-3]
    info =[{'time': timeMS, 'velocity': float(serialData [0]), 'rotation': (serialData[1])}]
    with open ('filename.csv', 'w') as csvfile:
      fileWriter = csv.writer(csvfile, delimiter = ',', quotechar = '"', quoting =csv.QUOTE_MINIMAL)
      fileWriter.writerow(info)
